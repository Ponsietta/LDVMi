<section id="main">
    <div class="container">
        <br/><br/>

        <div class="row">
            <div class="col-sm-12">

                <div class="card" ng-show="showInput">
                    <div class="card-header bgm-orange">
                        <h2>Select Data Sources
                            <small>LinkedPipes will analyze those sources and try to discover visualizations.</small>
                        </h2>
                    </div>

                    <div class="card-body card-padding data-source-list">
                        <form name="dataSources">
                            <div class="data-source" ng-repeat="source in sources" ng-switch="source.type">
                                <div ng-switch-when="sparqlEndpoint">
                                    <div class="form-group fg-float">
                                        <div class="fg-line">
                                            <input type="text" ng-model="source.endpointUrl"
                                                   class="form-control fg-input"/>
                                        </div>
                                        <label class="fg-label">Endpoint URL</label>
                                    </div>
                                    <div class="form-group fg-float">
                                        <div class="fg-line">
                                            <textarea ng-model="source.graphUris"
                                                      class="form-control fg-input"></textarea>
                                        </div>
                                        <label class="fg-label">Graph IRIs</label>
                                    </div>
                                    <div class="text-right">
                                        <span class="btn btn-xs btn-default" ng-click="remove(source)">Remove</span>
                                    </div>
                                </div>

                                <div ng-switch-when="url">
                                    <div class="form-group fg-float">
                                        <div class="fg-line">
                                            <textarea ng-model="source.url" class="form-control fg-input"></textarea>
                                        </div>
                                        <label class="fg-label">URL containing RDF</label>
                                    </div>
                                    <div class="text-right">
                                        <span class="btn btn-xs btn-default" ng-click="remove(source)">Remove</span>
                                    </div>
                                </div>

                                <div ng-switch-when="file">
                                    <div class="form-group fg-float">
                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <span class="btn btn-primary btn-file m-r-10 waves-effect waves-button">
                                                <span class="fileinput-new">Select file(s)</span>
                                                <span class="fileinput-exists">Change</span>
                                                <input type="file" name="" multiple ng-file-model="source.files">
                                            </span>
                                            <span class="fileinput-filename"></span>
                                            <a href="#" class="close fileinput-exists" data-dismiss="fileinput">Ã—</a>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <span class="btn btn-xs btn-default" ng-click="remove(source)">Remove</span>
                                    </div>
                                </div>
                            </div>


                            <div class="text-center" ng-show="!sources.length">
                                <br/>
                                You need to add some data source for the discovery to run.
                            </div>
                            <br/><br/>

                            <div class="row">
                                <div class="col-md-6 text-left">
                                    <label>Add more:&nbsp;&nbsp;</label>
                                    <div class="btn-group">
                                        <a href="" class="btn btn-default" ng-click="add('url')">RDF from URL</a>
                                        <a href="" class="btn btn-default" ng-click="add('file')">RDF from file</a>
                                        <a href="" class="btn btn-default" ng-click="add('sparqlEndpoint')">Sparql Endpoint</a>
                                    </div>
                                </div>
                                <div class="col-md-6 text-right">
                                    <div ng-show="sources.length">
                                        <button class="btn btn-default waves-effect" ng-click="visualize(true)">Feeling
                                            lucky
                                        </button>
                                        <button class="btn btn-primary waves-effect" ng-click="visualize()">Visualize
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card" ng-hide="showInput">
                    <div class="card-header bgm-blue">
                        <h2>Visualizations discovery
                            <small>
                                LinkedPipes is analyzing your data sources. Those are examined to find a well-known data
                                patterns
                                in order to automatically provide you with a suitable visualization.
                            </small>
                        </h2>
                    </div>

                    <div class="card-body card-padding">
                        <div class="listview lv-bordered lv-lg">
                            <div class="lv-body">
                                <div class="lv-item media">
                                    <div class="checkbox pull-left">
                                        <i class="md md-query-builder" ng-if="creatingDatasources"
                                           style="font-size: 24px"></i>
                                        <i class="md md-done" ng-if="datasourcesCreated" style="font-size: 24px"></i>
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Creating data sources</div>
                                        <small class="lv-small">
                                            Data sources to be created: {{sources.length}} ({{validDataSources.length}}
                                            valid)
                                        </small>
                                    </div>
                                </div>
                                <div class="lv-item media">
                                    <div class="checkbox pull-left">
                                        <i class="md md-query-builder" ng-if="!discoveryFinished"
                                           style="font-size: 24px"></i>
                                        <i class="md md-done" ng-if="discoveryFinished" style="font-size: 24px"></i>
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Running discovery</div>
                                        <small class="lv-small">
                                            Pipelines discovered so far: {{pipelinesDiscovered}}.
                                            <a class="pull-right" ng-if="discoveryId && pipelinesDiscovered"
                                               href="/pipelines#/list?discoveryId={{discoveryId}}">See discovered
                                                pipelines</a>
                                        </small>
                                    </div>
                                </div>
                                <div class="lv-item media" ng-show="pipeline">
                                    <div class="checkbox pull-left">
                                        <i class="md md-query-builder" ng-if="!evaluationFinished"
                                           style="font-size: 24px"></i>
                                        <i class="md md-done" ng-if="evaluationFinished" style="font-size: 24px"></i>
                                    </div>
                                    <div class="media-body">
                                        <div class="lv-title">Evaluating pipeline</div>
                                        <small class="lv-small">
                                            {{pipeline.title}}
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center" ng-hide="redirect">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                                     aria-valuemax="100" style="width: 100%">
                                    <span class="sr-only">Waiting to finish...</span>
                                </div>
                            </div>
                        </div>
                        <div ng-show="redirect" class="text-center">
                            All done! You are being redirected...
                        </div>
                    </div>
                </div>

                <div class="card" ng-show="showInput">
                    <div class="card-header ch-alt m-b-20">
                        <h2>Recent Saved Pipelines</h2>
                        <ul class="actions">
                            <li>
                                <a href="">
                                    <i class="md md-cached"></i>
                                </a>
                            </li>
                        </ul>

                        <!--<button class="btn bgm-cyan btn-float waves-effect"><i class="md md-add"></i></button>-->
                    </div>

                    <div class="card-body">
                        <div class="listview">
                            <a class="lv-item" href="/pipelines#/detail/{{pipeline.id}}"
                               ng-repeat="pipeline in pipelines">
                                <div class="media">
                                    <!--<div class="pull-left">
                                        <img class="lv-img-sm" src="img/profile-pics/1.jpg" alt="">
                                    </div>-->
                                    <div class="media-body">
                                        <div class="lv-title" ng-bind="pipeline.title"></div>
                                        <small class="lv-small" ng-bind="pipeline.descriptions"></small>
                                    </div>
                                </div>
                            </a>
                            <a class="lv-footer" href="/pipelines#/list">View All</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>