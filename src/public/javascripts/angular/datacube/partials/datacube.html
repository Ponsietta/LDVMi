<div class="row">

    <div class="col-lg-3">

        <!--<div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Data source</h3>
            </div>
            <div class="panel-body">
                <p>Using a fixed dataset, which is a result of a Payola analyzer.</p>
            </div>
            <div class="panel-footer"></div>
        </div>
        -->

        <div class="well well-sm">
            <ul class="list-unstyled" style="margin-bottom: 0px">
                <li ng-repeat="l in availableLanguages" style="display: inline; margin-right: 3px;"><span ng-click="setLang(l)" class="flag-icon flag-icon-{{l}}"></span></li>
            </ul>
        </div>

        <p ng-show="dataStructures.length == 0">No data structures found in the supplied datasource.</p>
        <ul class="list-group" ng-show="dataStructures.length > 0">
            <li class="list-group-item active">Available data structures</h3>
            <li ng-repeat="ds in dataStructures" class="list-group-item">
                <input type="checkbox" ng-model="ds.isActive" ng-change="switchDSD(ds)" />&nbsp;{{ds.label.variants[language]}}
            </li>
        </ul>

        <div class="panel panel-default" ng-show="datasets.length > 0">
            <div class="panel-heading">
                <h3 class="panel-title">Available datasets</h3>
            </div>
            <div class="panel-body">
                <p ng-show="datasets.length == 0">No named datasets found.</p>
                <ul class="list-unstyled" ng-show="datasets.length > 0">
                    <li ng-repeat="ds in datasets"><input type="checkbox" ng-model="ds.active" ng-change="changeDataset($index)" />&nbsp;{{ds.label.variants[language]}}</li>
                </ul>
            </div>
            <div class="panel-footer"></div>
        </div>

        <div ng-repeat="type in componentTypes">
            <ul class="list-group">
                <li class="list-group-item active">{{type.plural}} settings</li>
                <li ng-repeat="component in activeDSD.components | orderBy:'order'" ng-if="component[type.key]" class="list-group-item" ng-class="{'list-group-item-danger': values[component[type.key].uri].length == 0}">
                    <i class="glyphicon glyphicon-cog" ng-click="component.settingsVisible = !component.settingsVisible"></i>
                    {{component.label.variants[language] || component.label.variants["en"]}}

                    <ul style="position: absolute; top: 70px; left: 100%; width: 100%" ng-show="component.settingsVisible">
                        <li ng-repeat="v in values[component[type.key].uri]"><input type="checkbox" ng-model="v.active" />&nbsp;{{v.label || v.uri}}</li>
                    </ul>
                    <p ng-show="values[component[type.key].uri].length == 0"><br />This {{type.key}} has no values. That's why your chart is empty.</p>
                </li>
            </ul>
        </div>

    </div>

    <div class="col-lg-9">
        <div class="alert alert-danger" ng-show="dataStructures.length == 0"><p>The chosen datasource does not contain any DataCube vocabularies.</p></div>

        <button class="btn btn-primary" ng-click="refresh()"><i class="glyphicon glyphicon-refresh"></i> Refresh</button>

        <input type="text" ng-model="permalink" readonly ng-if="permalink" />

        <div class="btn-group">
            <button class="btn btn-default" ng-click="showChart()" ng-class="{'btn-success': chartVisible}"><i class="glyphicon glyphicon-signal"></i> Chart</button>
            <button class="btn btn-default" ng-click="showMap()" ng-class="{'btn-success': mapVisible}"><i class="glyphicon glyphicon-globe"></i> Map</button>
        </div>

        <div class="btn-group" ng-show="chartVisible">
            <button class="btn btn-default" ng-click="switchChart('line', true)" ng-class="{'btn-success':highcharts.options.chart.type == 'line'}">Line</button>
            <button class="btn btn-default" ng-click="switchChart('bar', true)" ng-class="{'btn-success':highcharts.options.chart.type == 'bar'}">Bar</button>
            <button class="btn btn-default" ng-click="switchChart('column', true)" ng-class="{'btn-success':highcharts.options.chart.type == 'column'}">Column</button>
            <button class="btn btn-default" ng-click="switchChart('area', true)" ng-class="{'btn-success':highcharts.options.chart.type == 'area'}">Area</button>
            <button class="btn btn-default" ng-disabled="highcharts.series.length > 1" ng-click="switchChart('pie', true); switchPolar(false, true);" ng-class="{'btn-success':highcharts.options.chart.type == 'pie'}">Pie</button>
        </div>
        <div class="btn-group" ng-show="chartVisible">
            <button class="btn btn-default" ng-click="switchPolar(true, true)" ng-class="{'btn-success':highcharts.options.chart.polar}">Polar</button>
            <button class="btn btn-default" ng-click="switchPolar(false, true)" ng-class="{'btn-success':!highcharts.options.chart.polar}">Normal</button>
        </div>

        <highchart id="chart1" config="highcharts" class="cubechart" ng-show="chartVisible"></highchart>

        <cz-region-map data="czRegionData" ng-show="mapVisible"></cz-region-map>

    </div>


</div>